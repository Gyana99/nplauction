<!-- player-registration.component.html -->
<section class="reg-wrap" aria-labelledby="regTitle">
  <div class="card">

    <!-- Header -->
    <header class="card-top">
      <div class="brand">
        <div class="logo-glow" aria-hidden="true"></div>
        <h1 id="regTitle">The Auction Spotlight</h1>
      </div>
      <p class="lead">Secure your place in the next big cricket auction — professional, quick and stylish.</p>
    </header>

    <!-- FORM -->
    <form class="form-grid" [formGroup]="registrationForm" (ngSubmit)="onSubmit()" novalidate>

      <!-- LEFT SECTION (Full width now) -->
      <div class="panel left">

        <!-- IMAGE UPLOAD -->
        <label class="dropzone" tabindex="0" for="playerImage">
          <input
            id="playerImage"
            type="file"
            accept=".jpg,.jpeg,.png"
            (change)="onFileChange($event)"
            aria-describedby="imageError"
            hidden
          />

          <div class="drop-inner">
            <div
              class="preview"
              [style.background-image]="imagePreview ? 'url(' + imagePreview + ')' : 'none'">
              <ng-container *ngIf="!imagePreview">
                <svg class="camera" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M4 7h3l2-3h6l2 3h3v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7zM12 17a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/>
                </svg>
                <div class="upload-cta">
                  <strong>Upload or drop image</strong>
                  <small>JPG / PNG / JPEG — max 5MB</small>
                </div>
              </ng-container>
            </div>

            <!-- Remove Button -->
            <div class="drop-actions" *ngIf="imagePreview">
              <div class="file-meta">
                <span class="name">{{ f['playerImage'].value?.name || 'Selected image' }}</span>
                <button type="button" class="btn tiny ghost" (click)="clearImageSelection()">Remove</button>
              </div>
            </div>
          </div>
        </label>

        <!-- File Error -->
        <div id="imageError" class="error"
          *ngIf="f['playerImage'].invalid && (f['playerImage'].touched || f['playerImage'].dirty)">
          <small *ngIf="f['playerImage'].errors?.['fileSize']">File size exceeds 5MB.</small>
          <small *ngIf="f['playerImage'].errors?.['fileType']">Invalid file type. Use JPG/PNG/JPEG.</small>
          <small *ngIf="f['playerImage'].errors?.['required']">Player image is required.</small>
        </div>

        <!-- Full Name -->
        <div class="field">
          <label for="playerName">Full Name</label>
          <input id="playerName" type="text" formControlName="playerName" placeholder="e.g., Rohit Sharma">
          <div class="error" *ngIf="f['playerName'].invalid && (f['playerName'].touched || f['playerName'].dirty)">
            <small *ngIf="f['playerName'].errors?.['required']">Full name is required.</small>
            <small *ngIf="f['playerName'].errors?.['minlength']">Name must be at least 3 characters.</small>
          </div>
        </div>

        <!-- AGE + TYPE Row -->
        <div class="row">
          <div class="field half">
            <label for="playerAge">Age</label>
            <input id="playerAge" type="number" min="16" max="60" formControlName="playerAge" placeholder="e.g., 28">
            <div class="error" *ngIf="f['playerAge'].invalid && (f['playerAge'].touched || f['playerAge'].dirty)">
              <small *ngIf="f['playerAge'].errors?.['required']">Age is required.</small>
              <small *ngIf="f['playerAge'].errors?.['min'] || f['playerAge'].errors?.['max']">Age must be 16–60.</small>
            </div>
          </div>

          <div class="field half">
            <label for="playerType">Player Type</label>
            <div class="select-wrap">
              <select id="playerType" formControlName="playerType" class="c">
                <option value="" disabled>Select role</option>
                <option value="Batsman">Batsman</option>
                <option value="Bowler">Bowler</option>
                <option value="All-Rounder">All-Rounder</option>
                <option value="Wicket-Keeper">Wicket-Keeper</option>
              </select>
              <span class="arrow">▾</span>
            </div>
            <div class="error" *ngIf="f['playerType'].invalid && (f['playerType'].touched || f['playerType'].dirty)">
              <small>Player type is required.</small>
            </div>
          </div>
        </div>

        <!-- PHONE -->
        <div class="field">
          <label for="playerPhone">Phone Number (10 digits)</label>
          <input id="playerPhone" type="tel" formControlName="playerPhone" placeholder="9876543210">
          <div class="error" *ngIf="f['playerPhone'].invalid && (f['playerPhone'].touched || f['playerPhone'].dirty)">
            <small *ngIf="f['playerPhone'].errors?.['required']">Phone is required.</small>
            <small *ngIf="f['playerPhone'].errors?.['pattern']">Enter valid 10-digit number.</small>
          </div>
        </div>

        <!-- BUTTONS (now under the form) -->
        <div class="ctas">
          <button type="submit" class="btn primary" [disabled]="registrationForm.invalid">
            Register for Auction
          </button>

          <button type="button" class="btn ghost" (click)="registrationForm.reset(); clearImageSelection();">
            Reset
          </button>
        </div>

      </div>
    </form>

    <footer class="foot">© Auction Spotlight • Built with passion</footer>
  </div>
</section>
